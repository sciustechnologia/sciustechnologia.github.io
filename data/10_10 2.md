---
layout: default
---

- Learn the ins and outs of SQL syntax
- Generate reports using sales and user data
- Analyze data using Aggregate Functions
- Run complex queries using MySQL logical operators and string functions
- Write all the common SQL joins
- Work with large datasets containing thousands of entries
- Design and implement complex database schemas
- Learn to navigate the treacherous world of storing dates and times
- Clone the database structure of a photo sharing social network
- Work with MySQL 8.x Window Functions: RANK, LEAD, LAG, NTILE, etc.
- Create MySQL database views and virtual tables


https://dev.mysql.com/doc/workbench/en/

https://dev.mysql.com/doc/refman/8.4/en/

```bash
mysql -u root -p
369mTbB963Cc
show databases;
USE book_shop;
SHOW TABLES;
DESC books;

# ctrl+l clears the screen
```

### Create datbase and tables

```SQL
CREATE DATABASE <database_name>;

-- Example:
CREATE DATABASE soap_store;
```

```bash
mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| soap_store         |
| sys                |
+--------------------+
5 rows in set (0.00 sec)
```

```SQL
DROP DATABASE <database_name>;
-- removes the database and content entirely
```

=> check DbGate

### use database

```SQL
USE <database_name>;
USE tea_shop;
SELECT database();
# Result tea_shop
```

### 22. Introducing Tables

- database is a bunch of tables
- collection of related data held in a structured format within a database
- MongoDB is not relational DB, it is not using tables.

```SQL

```

Cat table
- header is called columns (Name Breed Age)
- rows is the actual data


Basic Datatypes Challenge
"Solution"  to the Basic Datatypes Exercise

screenshot types

Username content Fav


### 23. Data Types: The Basics

- content needs to have a onsistent type

Numeric Types
* INT [max value of 2147483647]
* SMALLINT
TINYINT
BIGINT
DECIMAL
NUMERIC
FLOAT
DOUBLE
BIT

### String Types

* CHAR
* VARCHAR [variable Length String]
* BINARY
* VARBINARY
* BLOB
* TUINYBLOB
* EDIUMBLOB
* LONGBLOB
* TEXT
* TINYTEXT
* MEDIUMTEXT
* LONGTEXT
* ENUM

[refman](https://dev.mysql.com/doc/refman/8.4/en/data-types.html)

we can specify the max number of characters allowed

varchar(100)

https://www.udemy.com/course/the-ultimate-mysql-bootcamp-go-from-sql-beginner-to-expert/learn/lecture/34412592#notes

### 24. Basic Datatypes Challenge

uawername (15 char)
tweet content char(140)
fav(int)

username 		tweet 			fav
varchar(15)		varschar(140)	int
'coolguy'	'	my first tweet'	1
guitar_queen	'O love music'	10
'lonely_heart'	'still looking'	0



### 26. Creating Tables

```SQL
CREATE DATABASE pet_shop;
USE pet_shop;

CREATE TABLE cats (
    name VARCHAR(50),
    age INT
);
 
CREATE TABLE dogs (
    name VARCHAR(50),
    breed VARCHAR(50),
    age INT
);


SHOW TABLES;
+----------------------+
| Tables_in_soap_store |
+----------------------+
| cats                 |
| dogs                 |
+----------------------+

SHOW COLUNS FROM <tablename>;
SHOW COLUNS FROM cats;
+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| name  | varchar(50) | YES  |     | NULL    |       |
| age   | int         | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+

-- OR

DESC <tablename>;
DESCRIBE cats;
```


### 30. Dropping Tables

```SQL
DROP TABLE <tablename>;

-- right click on the table in the UI
```

### 32. Tables Basics Activity

```SQL
CREATE TABLE pastries
  (
    name VARCHAR(50),
    quantity INT
  );
-- View tables:

SHOW TABLES;
+---------------------+
| Tables_in_pet_store |
+---------------------+
| cats                |
| dogs                |
| pastries            |
+---------------------+
-- View details of pastries table:

DESC pastries;

-- Delete the whole pastries table:

DROP TABLE pastries;
```


### 34. MySQL Comments


```SQL
SHOW TABLES;
-- SHOW TABLES;

-- cmd & forward slash
```



## Inserting data

### 36. INSERT: The Basics
```SQL
CREATE DATABASE pet_store;
USE pet_store;
CREATE TABLE cats (
    name VARCHAR(50),
    age INT
);

DESC cats;

INSERT INTO cats(name, age) 
-- cats table name and name and age the columns
VALUES ('Jetson', 7);
INSERT INTO cats (name, age) 
VALUES ('Blue Steel', 5);
INSERT INTO cats (name, age) 
VALUES ('Jenkins', 6);
```

```SQL

+-------+-------------+------+-----+---------+-------+
| Field | Type        | Null | Key | Default | Extra |
+-------+-------------+------+-----+---------+-------+
| name  | varchar(50) | YES  |     | NULL    |       |
| age   | int         | YES  |     | NULL    |       |
+-------+-------------+------+-----+---------+-------+
```

How to verify if insert worked

```SQL
SELECT * FROM <table_name>;
SELECT * FROM cats;
+------------+------+
| name       | age  |
+------------+------+
| Jetson     |    7 |
| Jetson     |    7 |
| Jetson     |    7 |
| Blue Steel |    5 |
+------------+------+
```

### 40. Multi-inserts

```SQL
INSERT INTO cats(name, age)
VALUES('Chalrie', 10),
      ('Sadie', 3),
      ('Lazy Bear',1);
SELECT * FROM cats;
+------------+------+
| name       | age  |
+------------+------+
| Jetson     |    7 |
| Jetson     |    7 |
| Jetson     |    7 |
| Blue Steel |    5 |
| Chalrie    |   10 |
| Sadie      |    3 |
| Lazy Bear  |    1 |
+------------+------+
```

```SQL
CREATE TABLE people(
  first_name VARCHAR(20),
  last_name VARCHAR(20), 
  age INT);

DESC people;
+------------+-------------+------+-----+---------+-------+
| Field      | Type        | Null | Key | Default | Extra |
+------------+-------------+------+-----+---------+-------+
| first_name | varchar(20) | YES  |     | NULL    |       |
| last_name  | varchar(20) | YES  |     | NULL    |       |
| age        | int         | YES  |     | NULL    |       |
+------------+-------------+------+-----+---------+-------+

INSERT INTO people(first_name, last_name, age)
VALUES('Tina', 'BBelcher', 13);

INSERT INTO people(first_name, last_name, age)
VALUES('Charlie', 'Brown', 10),
      ('Sadie', 'Smith', 9),
      ('Lucile', 'Jackson', 11);

SELECT * FROM people;
+------------+-----------+------+
| first_name | last_name | age  |
+------------+-----------+------+
| Tina       | BBelcher  |   13 |
| Charlie    | Brown     |   10 |
| Sadie      | Smith     |    9 |
| Lucile     | Jackson   |   11 |
+------------+-----------+------+
```

### 44. Working With NOT NULL

- NULL value (lack of value, can be empty) is permitted
- ZERO is different since it is a number.

```SQL
+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| name  | varchar(5) | YES  |     | NULL    |       |
| age   | int(11)    | YES  |     | NULL    |       |
+-------+------------+------+-----+---------+-------+
```

```SQL
INSERT INTO cats(name)
VALUES('Todd');
SELECT * FROM cats;
+------------+------+
| name       | age  |
+------------+------+
| Jetson     |    7 |
| Jetson     |    7 |
| Jetson     |    7 |
| Blue Steel |    5 |
| Chalrie    |   10 |
| Sadie      |    3 |
| Lazy Bear  |    1 |
| Todd       | NULL |
+------------+------+

INSERT INTO cats(name)
VALUES();
```

- now you can build in a constraint.

```SQL
CREATE TABLE cats2
  ( 
     name VARCHAR(100) NOT NULL,
     age  INT NOT NULL
  ); 

```

### 46. Sidenote: Quotes In MySQL

- single quotes only always

```SQL
INSERT INTO shops(name) VALUES ('shoe emporium');
INSERT INTO shops(name) VALUES ('mario's pizza');
INSERT INTO shops(name) VALUES ('mario\'s pizza');
```

### 47. Adding DEFAULT Values

```SQL
CREATE TABLE cats3
  ( 
     name VARCHAR(100) DEFAULT 'unnamed',
     age  INT DEFAULT 99
  ); 
```

```SQL
CREATE TABLE cats3
  ( 
     name VARCHAR(50) DEFAULT 'mystery',
     age  INT DEFAULT 99
  ); 

INSERT INTO cats3(age) VALUES (2);

SELECT * FROM cats3;
+---------+------+
| name    | age  |
+---------+------+
| mystery |    2 |
+---------+------+
INSERT INTO cats3() VALUES ();
SELECT * FROM cats3;
+---------+------+
| name    | age  |
+---------+------+
| mystery |    2 |
| mystery |   99 |
+---------+------+
```


```SQL
CREATE TABLE cats4
  ( 
     name VARCHAR(100) NOT NULL DEFAULT 'unnamed',
     age  INT NOT NULL DEFAULT 99
  ); 
```

Define a table with a DEFAULT name specified:
```SQL
CREATE TABLE cats3  (    
    name VARCHAR(20) DEFAULT 'no name provided',    
    age INT DEFAULT 99  
);
```
Notice the change when you describe the table:
```SQL
DESC cats3;
```
Insert a cat without a name:
```SQL
INSERT INTO cats3(age) VALUES(13);
```
Or a nameless, ageless cat:
```SQL
INSERT INTO cats3() VALUES();
```
Combine NOT NULL and DEFAULT:
```SQL
CREATE TABLE cats4  (    
    name VARCHAR(20) NOT NULL DEFAULT 'unnamed',    
    age INT NOT NULL DEFAULT 99 
);
```
### 49. Introducing Primary Keys

+-------+------------+------+-----+---------+-------+
| Field | Type       | Null | Key | Default | Extra |
+-------+------------+------+-----+---------+-------+
| name  | varchar(5) | YES  |     | NULL    |       |
| age   | int(11)    | YES  |     | NULL    |       |
+-------+------------+------+-----+---------+-------+

- Primary Key, A Unique Identifier

Name  Breed Age
Monty Tabby 10
Monty Tabby 10
Monty Tabby 10
Monty Tabby 10

Name  Breed Age CatID
Monty Tabby 10  1
Monty Tabby 10  2
Monty Tabby 10  3
Monty Tabby 10  4

```SQL
CREATE TABLE unique_cats (
  cat_id INT NOT NULL PRIMARY KEY, 
  name VARCHAR(100), 
  age INT
 );

DESC unique_cats;
+--------+--------------+------+-----+---------+-------+
| Field  | Type         | Null | Key | Default | Extra |
+--------+--------------+------+-----+---------+-------+
| cat_id | int          | NO   | PRI | NULL    |       |
| name   | varchar(100) | YES  |     | NULL    |       |
| age    | int          | YES  |     | NULL    |       |
+--------+--------------+------+-----+---------+-------+
```

-- One way of specifying a PRIMARY KEY
```SQL
CREATE TABLE unique_cats (
    cat_id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    age INT NOT NULL
);
```

-- Another option:

```SQL
CREATE TABLE unique_cats2 (
    cat_id INT,
    name VARCHAR(100) NOT NULL,
    age INT NOT NULL,
    PRIMARY KEY (cat_id)
);
```

- PRIMARY KEYs cannot be NULL.

### 51. Working With AUTO_INCREMENT

- cat_id will automatically increment for each new cat inserted into the table

```SQL
CREATE TABLE unique_cats3 (
    cat_id INT AUTO_INCREMENT,
    name VARCHAR(100),
    age INT,
    PRIMARY KEY (cat_id)
);
```

### 53. Create Table/ Insert Exercise

Define an Employees table, with the following fields:

 

id - number(automatically increments) and  primary key
last_name - text, mandatory
first_name - text, mandatory
middle_name - text, not mandatory
age - number mandatory
current_status - text, mandatory, defaults to 'employed'


```SQL
CREATE TABLE employees (
    id INT AUTO_INCREMENT PRIMARY KEY,
    last_name VARCHAR(100) NOT NULL,
    first_name VARCHAR(100) NOT NULL,
    middle_name VARCHAR(100),
    age INT NOT NULL,
    current_status VARCHAR(100) NOT NULL DEFAULT 'employed'
);
``` 



## Section 5 CRUD Basics

So far, 

**Create** (INSERT INTO)
```SQL
INSERT INTO cats(name, age)
VALUES('Taco', 14);
```
Next,
**Read**
**Update**
**Delete**

### 57. Getting Our New "Dataset"


```SQL
DROP TABLE cats;

CREATE TABLE cats 
  ( 
     cat_id INT AUTO_INCREMENT, 
     name   VARCHAR(100), 
     breed  VARCHAR(100), 
     age    INT, 
     PRIMARY KEY (cat_id) 
  ); 

DESC cats;
+--------+--------------+------+-----+---------+----------------+
| Field  | Type         | Null | Key | Default | Extra          |
+--------+--------------+------+-----+---------+----------------+
| cat_id | int          | NO   | PRI | NULL    | auto_increment |
| name   | varchar(100) | YES  |     | NULL    |                |
| breed  | varchar(100) | YES  |     | NULL    |                |
| age    | int          | YES  |     | NULL    |                |
+--------+--------------+------+-----+---------+----------------+

INSERT INTO cats(name, breed, age) 
VALUES ('Ringo', 'Tabby', 4),
       ('Cindy', 'Maine Coon', 10),
       ('Dumbledore', 'Maine Coon', 11),
       ('Egg', 'Persian', 4),
       ('Misty', 'Tabby', 13),
       ('George Michael', 'Ragdoll', 9),
       ('Jackson', 'Sphynx', 7);

SELECT * FROM cats;

+--------+----------------+------------+------+
| cat_id | name           | breed      | age  |
+--------+----------------+------------+------+
|      1 | Ringo          | Tabby      |    4 |
|      2 | Cindy          | Maine Coon |   10 |
|      3 | Dumbledore     | Maine Coon |   11 |
|      4 | Egg            | Persian    |    4 |
|      5 | Misty          | Tabby      |   13 |
|      6 | George Michael | Ragdoll    |    9 |
|      7 | Jackson        | Sphynx     |    7 |
+--------+----------------+------------+------+
```

### 59. Introducing SELECT

- Read: How do we retrieve and search data? 

```SQL
SELECT * FROM cats;
-- * Give me all the columns from the cats table
```

- SELECT Expression: What columns do you want?

```SQL
SELECT name FROM cats;
+----------------+
| name           |
+----------------+
| Ringo          |
| Cindy          |
| Dumbledore     |
| Egg            |
| Misty          |
| George Michael |
| Jackson        |
+----------------+
```

```SQL
SELECT name, breed FROM cats;
+----------------+------------+
| name           | breed      |
+----------------+------------+
| Ringo          | Tabby      |
| Cindy          | Maine Coon |
| Dumbledore     | Maine Coon |
| Egg            | Persian    |
| Misty          | Tabby      |
| George Michael | Ragdoll    |
| Jackson        | Sphynx     |
+----------------+------------+
```

### 61. WHERE clause


```SQL
SELECT * FROM cats WHERE age=4;
+--------+-------+---------+------+
| cat_id | name  | breed   | age  |
+--------+-------+---------+------+
|      1 | Ringo | Tabby   |    4 |
|      4 | Egg   | Persian |    4 |
+--------+-------+---------+------+

SELECT * FROM cats WHERE name='Egg';
+--------+------+---------+------+
| cat_id | name | breed   | age  |
+--------+------+---------+------+
|      4 | Egg  | Persian |    4 |
+--------+------+---------+------+
```

### Examples
- Write the SQL that selects the following:

```SQL
+--------+
| cat_id |
+--------+
|      1 |
|      2 |
|      3 |
|      4 |
|      5 |
|      6 |
|      7 |
+--------+
SELECT cat_id FROM cats;
```

```SQL
+----------------+------------+
| name           | breed      |
+----------------+------------+
| Ringo          | Tabby      |
| Cindy          | Maine Coon |
| Dumbledore     | Maine Coon |
| Egg            | Persian    |
| Misty          | Tabby      |
| George Michael | Ragdoll    |
| Jackson        | Sphynx     |
+----------------+------------+
SELECT name, breed FROM cats;
```

```SQL
+-------+------+
| name  | age  |
+-------+------+
| Ringo |    4 |
| Misty |   13 |
+-------+------+
SELECT name, age FROM cats WHERE breed=Tabby;
SELECT name, age FROM cats WHERE breed='Tabby';
```

```SQL
+--------+------+
| cat_id | age  |
+--------+------+
|      4 |    4 |
|      7 |    7 |
+--------+------+
Write the SQL that selects cat_id is same as age:
SELECT cat_id, age FROM cats WHERE cat_id = age;
```

### 66. Aliases [Easier to read results ]

```SQL
SELECT cat_id AS id, name FROM cats;
+----+----------------+
| id | name           |
+----+----------------+
|  1 | Ringo          |
|  2 | Cindy          |
|  3 | Dumbledore     |
|  4 | Egg            |
|  5 | Misty          |
|  6 | George Michael |
|  7 | Jackson        |
+----+----------------+
```

### 68. Using UPDATE [alter existing data]

```SQL
UPDATE cats SET breed='Shorthair' 
WHERE breed='Tabby';
-- all values in the row are set to Shorthair

SELECT * FROM cats;
+--------+----------------+------------+------+
| cat_id | name           | breed      | age  |
+--------+----------------+------------+------+
|      1 | Ringo          | Tabby      |    4 |
|      2 | Cindy          | Maine Coon |   10 |
|      3 | Dumbledore     | Maine Coon |   11 |
|      4 | Egg            | Persian    |    4 |
|      5 | Misty          | Tabby      |   13 |
|      6 | George Michael | Ragdoll    |    9 |
|      7 | Jackson        | Sphynx     |    7 |
+--------+----------------+------------+------+
UPDATE cats SET age=14 
WHERE name='Misty';
+--------+----------------+------------+------+
| cat_id | name           | breed      | age  |
+--------+----------------+------------+------+
|      1 | Ringo          | Tabby      |    4 |
|      2 | Cindy          | Maine Coon |   10 |
|      3 | Dumbledore     | Maine Coon |   11 |
|      4 | Egg            | Persian    |    4 |
|      5 | Misty          | Tabby      |   14 |
|      6 | George Michael | Ragdoll    |    9 |
|      7 | Jackson        | Sphynx     |    7 |
+--------+----------------+------------+------+
```

### 70. A Quick Rule Of Thumb

- check first before updating

```SQL
SELECT * FROM cats WHERE name='misty';
+--------+-------+-------+------+
| cat_id | name  | breed | age  |
+--------+-------+-------+------+
|      5 | Misty | Tabby |   14 |
+--------+-------+-------+------+
-- check with WHERE clause and now it is safer to do an update
```

```SQL
SELECT * FROM cats WHERE name='Jackson';
+--------+---------+--------+------+
| cat_id | name    | breed  | age  |
+--------+---------+--------+------+
|      7 | Jackson | Sphynx |    7 |
+--------+---------+--------+------+
UPDATE cats SET name='Jack' WHERE name='Jackson';
SELECT * FROM cats;
+--------+----------------+------------+------+
| cat_id | name           | breed      | age  |
+--------+----------------+------------+------+
|      1 | Ringo          | Tabby      |    4 |
|      2 | Cindy          | Maine Coon |   10 |
|      3 | Dumbledore     | Maine Coon |   11 |
|      4 | Egg            | Persian    |    4 |
|      5 | Misty          | Tabby      |   14 |
|      6 | George Michael | Ragdoll    |    9 |
|      7 | Jack           | Sphynx     |    7 |
+--------+----------------+------------+------+

SELECT * FROM cats WHERE breed='Maine Coon'; 
 
UPDATE cats SET age=12 WHERE breed='Maine Coon'; 
 
SELECT * FROM cats WHERE breed='Maine Coon';
```


### 74. Introducing DELETE

```SQL
DELETE FROM cats WHERE name='Egg';
-- Always run SELECT first to double check...

DELETE FROM cats;
-- deletes every row


-- Delete all 4 year old cats:
DELETE FROM cats WHERE age=4;

-- Delete cats where cat_id is the same as their age:
DELETE FROM cats WHERE cat_id=age;
```

- DELETE all 4 year old cats
- DELETE cats whose age is the same as their cat_id
- DELETE all cats 

- Create a new database shirts_db
- Create a new table shirts

```text
shirt_id  article color shirt_size  last_worn
1 t-shirt white S 10
2 t-shirt green S 200
3 polo shirt  black M 10
4 tank top  blue  S 50
5 t-shirt pink  S 0
6 polo shirt  red M 5
7 tank top  white S 200
8 tank top  blue  M 15
```

Primary Key for shirt_id

```SQL
('t-shirt', 'white', 'S', 10),
('t-shirt', 'green', 'S', 200),
('polo shirt', 'black', 'M', 10),
('tank top', 'blue', 'S', 50),
('t-shirt', 'pink', 'S', 0),
('polo shirt', 'red', 'M', 5),
('tank top', 'white', 'S', 200),
('tank top', 'blue', 'M', 15)
```

Get All That Data In There With a single line
Add A New Shirt Purple polo shirt, size M last worn 50 days ago

SELECT all shirts
But Only Print Out Article and Color

SELECT all medium shirts
Print Out Everything But shirt_id

Update all polo shirts
Change their size to L

Update the shirt last worn 15 days ago
Change last_worn to 0

Update all white shirts
Change size to 'XS' and color to 'off white'

Delete all old shirts
Last worn 200 days ago

Delete all tank tops
Your tastes have changed..

```SQL
CREATE TABLE shirts
  (
    shirt_id INT NOT NULL AUTO_INCREMENT,
    article VARCHAR(100),
    color VARCHAR(100),
    shirt_size VARCHAR(100),
    last_worn INT,
    PRIMARY KEY(shirt_id)
  );
```

## String Functions

[14.8 String Functions and Operators](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html)


### 89. Section Introduction
```SQL
CREATE DATABASE book_shop;
USE book_shop;

CREATE TABLE books 
	(
		book_id INT AUTO_INCREMENT,
		title VARCHAR(100),
		author_fname VARCHAR(100),
		author_lname VARCHAR(100),
		released_year INT,
		stock_quantity INT,
		pages INT,
		PRIMARY KEY(book_id)
	);
```
You can actually run the sql from the cmd line
```SQL
source file_name.sql
```

Steps:

```bash
# you quit;
pwd
cd ..
ls
# you land in folder where the sql fie is and
# mysql -u root -p
# 369mTbB963Cc
# and now within the mysql shell you can 
source book_data.spl
# you get an error no database exists
SELECT database();
SHOW database();
SHOW tables;
+---------------------+
| Tables_in_book_shop |
+---------------------+
| books               |
+---------------------+
DESC books;
+----------------+--------------+------+-----+---------+----------------+
| Field          | Type         | Null | Key | Default | Extra          |
+----------------+--------------+------+-----+---------+----------------+
| book_id        | int          | NO   | PRI | NULL    | auto_increment |
| title          | varchar(100) | YES  |     | NULL    |                |
| author_fname   | varchar(100) | YES  |     | NULL    |                |
| author_lname   | varchar(100) | YES  |     | NULL    |                |
| released_year  | int          | YES  |     | NULL    |                |
| stock_quantity | int          | YES  |     | NULL    |                |
| pages          | int          | YES  |     | NULL    |                |
+----------------+--------------+------+-----+---------+----------------+
```

### 93. CONCAT


```SQL

CONCAT(string1, string2, ...)
SELECT CONCAT('Hello', ' ', 'World') AS concatenated_string;

concatenated_string
-------------------
Hello World

CONCAT(x,y,z)
CONCAT(column, anotherColumn)
CONCAT(author_fname, author_lname)
CONCAT(column, 'text', anotherColumn, 'more text')

+--------------+----------------+
| author_fname | author_lname   |
+--------------+----------------+
| Jhumpa       | Lahiri         |
| Neil         | Gaiman         |
| Neil         | Gaiman         |
| Jhumpa       | Lahiri         |
| Dave         | Eggers         |
| Dave         | Eggers         |
| Michael      | Chabon         |
| Patti        | Smith          |
| Dave         | Eggers         |
| Neil         | Gaiman         |
| Raymond      | Carver         |
| Raymond      | Carver         |
| Don          | DeLillo        |
| John         | Steinbeck      |
| David        | Foster Wallace |
| David        | Foster Wallace |
| Adam         | Smith          |
+--------------+----------------+

CONCAT(author_fname, ' ', author_lname)
```

```SQL
SELECT
  CONCAT(author_fname, ' ', author_lname) AS concatenated_string
FROM books;

+----------------------+
| concatenated_string  |
+----------------------+
| Jhumpa Lahiri        |
| Neil Gaiman          |
| Neil Gaiman          |
| Jhumpa Lahiri        |
| Dave Eggers          |
| Dave Eggers          |
| Michael Chabon       |
| Patti Smith          |
| Dave Eggers          |
| Neil Gaiman          |
| Raymond Carver       |
| Raymond Carver       |
| Don DeLillo          |
| John Steinbeck       |
| David Foster Wallace |
| David Foster Wallace |
+----------------------+

```

Some SQL database systems also support concatenation using the `||` operator, which is particularly common in Oracle SQL:
```SQL
SELECT 'Hello' || ' ' || 'World' AS concatenated_string FROM dual;
```

### CONCAT_WS - Concat With Separator

- first argument is a seperator

```SQL
SELECT 
    CONCAT_WS(' - ', title, author_fname, author_lname) 
FROM books;

+------------------------------------------------------------------------+
| CONCAT_WS(' - ', title, author_fname, author_lname)                    |
+------------------------------------------------------------------------+
| The Namesake - Jhumpa - Lahiri                                         |
| Norse Mythology - Neil - Gaiman                                        |
| American Gods - Neil - Gaiman                                          |
| Interpreter of Maladies - Jhumpa - Lahiri                              |
| A Hologram for the King: A Novel - Dave - Eggers                       |
| The Circle - Dave - Eggers                                             |
| The Amazing Adventures of Kavalier & Clay - Michael - Chabon           |
| Just Kids - Patti - Smith                                              |
| A Heartbreaking Work of Staggering Genius - Dave - Eggers              |
| Coraline - Neil - Gaiman                                               |
| What We Talk About When We Talk About Love: Stories - Raymond - Carver |
| Where I'm Calling From: Selected Stories - Raymond - Carver            |
| White Noise - Don - DeLillo                                            |
| Cannery Row - John - Steinbeck                                         |
| Oblivion: Stories - David - Foster Wallace                             |
| Consider the Lobster - David - Foster Wallace                          |
+------------------------------------------------------------------------+
```

### 95. SUBSTRING

- [substr](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substr)
- `SUBSTR()` is a synonym for `SUBSTRING()`.

```SQL
SELECT SUBSTRING('Hello World', 1, 4);
-- Hell
SELECT SUBSTRING('Hello World', 7);
-- World
SELECT SUBSTR('Hello World', -3);
-- rld
SELECT SUBSTR('Hello World', -2,1);
-- l

SELECT SUBSTRING(title, 1, 15) from books;
+-------------------------+
| SUBSTRING(title, 1, 15) |
+-------------------------+
| The Namesake            |
| Norse Mythology         |
| American Gods           |
| Interpreter of          |
| A Hologram for          |
| The Circle              |
| The Amazing Adv         |
| Just Kids               |
| A Heartbreaking         |
| Coraline                |
| What We Talk Ab         |
| Where I'm Calli         |
| White Noise             |
| Cannery Row             |
| Oblivion: Stori         |
| Consider the Lo         |
+-------------------------+
```

```SQL
SELECT SUBSTRING(author_fname, 1, 1), author_lname from books;
SELECT SUBSTRING(author_fname, 1, 1) AS initial, author_lname from books;
 
+---------+----------------+
| initial | author_lname   |
+---------+----------------+
| J       | Lahiri         |
| N       | Gaiman         |
| N       | Gaiman         |
| J       | Lahiri         |
| D       | Eggers         |
| D       | Eggers         |
| M       | Chabon         |
| P       | Smith          |
| D       | Eggers         |
| N       | Gaiman         |
| R       | Carver         |
| R       | Carver         |
| D       | DeLillo        |
| J       | Steinbeck      |
| D       | Foster Wallace |
| D       | Foster Wallace |
+---------+----------------+
```

### 97. Combining String Functions

CONCAT and 

```SQL
SELECT CONCAT(SUBSTRING(title, 1, 10), '..') from books;
SELECT CONCAT(
  SUBSTRING(author_fname, 1, 1), '.', SUBSTRING(author_lname, 1, 1),'.'
  ) AS author_initialz 
FROM books;

```

### SQL Formatting

- [sqlformatter](https://codebeautify.org/sqlformatter)

```SQL
SELECT 
  CONCAT(
    SUBSTRING(title, 1, 10), 
    '..'
  ) 
from 
  books;
SELECT 
  CONCAT(
    SUBSTRING(author_fname, 1, 1), 
    '.', 
    SUBSTRING(author_lname, 1, 1), 
    '.'
  ) AS author_initialz 
FROM 
  books;

```

### 100. [REPLACE](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_replace)

Syntax

```SQL
REPLACE(str,from_str,to_str)

mysql> SELECT REPLACE('www.mysql.com', 'w', 'Ww');
        -> 'WwWwWw.mysql.com'
```

```SQL
SELECT REPLACE('Hello World', 'Hell', '%$#@');
SELECT REPLACE(title, ' ', '-') FROM books;
```

### 102. REVERSE

```SQL
SELECT REVERSE('Hello World');
+------------------------+
| REVERSE('Hello World') |
+------------------------+
| dlroW olleH            |
+------------------------+
```

### 104. CHAR_LENGTH

- [CHAR_LENGTH()](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_char-length)
  - Returns the length of the string str, Counts Characters in String
- [LENGTH(str)](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_length)
- `CHARACTER_LENGTH()` is a synonym for `CHAR_LENGTH()`.

```SQL
SELECT CHAR_LENGTH('Hello World');
-- 11
```

### 106. UPPER & LOWER

- Change A String's Case

```SQL
SELECT UPPER('Hello World');
-- HELLO WORLD 

SELECT LOWER('Hello World');
-- hello world  

SELECT CONCAT('MY FAVORITE BOOK IS ', LOWER(title)) FROM books;
```

### 108. Other String Functions

[INSERT(str,pos,len,newstr)](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_insert)

```SQL
SELECT INSERT('Hello Bobby', 6,0,'There');
+------------------------------------+
| INSERT('Hello Bobby', 6,0,'There') |
+------------------------------------+
| HelloThere Bobby                   |
+------------------------------------+

SELECT INSERT('Hello Bobby', 6,4,'There');
+------------------------------------+
| INSERT('Hello Bobby', 6,4,'There') |
+------------------------------------+
| HelloThereby                       |
+------------------------------------+
```

[LEFT(str,len)](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_left)
[RIGHT(str,len)](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_right)

- Returns the leftmost len characters from the string str, or NULL if any argument is NULL.

```SQL
mysql> SELECT LEFT('foobarbar', 5);
        -> 'fooba'
mysql> SELECT RIGHT('foobarbar', 4);
        -> 'rbar'
```

[REPEAT(str,count)](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_repeat)


```SQL
mysql> SELECT REPEAT('MySQL', 3);
        -> 'MySQLMySQLMySQL'
```

[TRIM([{BOTH | LEADING | TRAILING} [remstr] FROM] str), TRIM([remstr FROM] str)](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_trim)

-  all remstr prefixes or suffixes removed; spaces that are leading or trailing

```SQL
mysql> SELECT TRIM('  bar   ');
        -> 'bar'
mysql> SELECT TRIM(LEADING 'x' FROM 'xxxbarxxx');
        -> 'barxxx'
mysql> SELECT TRIM(BOTH 'x' FROM 'xxxbarxxx');
        -> 'bar'
mysql> SELECT TRIM(TRAILING 'xyz' FROM 'barxxyz');
        -> 'barx'
```

### 110. String Functions Exercise

```SQL
SELECT REVERSE(UPPER('Why does my cat look at me with such hatred?'));
 
SELECT REPLACE(title, ' ', '->') AS title FROM books;
 
SELECT 
    author_lname AS forwards, REVERSE(author_lname) AS backwards
FROM
    books;
    
 
SELECT UPPER(CONCAT(author_fname, ' ', author_lname)) AS 'full name in caps' FROM books;
 
 
SELECT CONCAT(title, ' was released in ', released_year) AS blurb FROM books;
 
SELECT title, CHAR_LENGTH(title) AS character_count FROM books;
 
SELECT 
    CONCAT(SUBSTR(title, 1, 10), '...') AS short_title,
    CONCAT(author_lname, ',', author_fname) AS author,
    CONCAT(stock_quantity, ' in stock') AS quantity
FROM
    books;
```





```SQL
INSERT INTO books
    (title, author_fname, author_lname, released_year, stock_quantity, pages)
    VALUES ('10% Happier', 'Dan', 'Harris', 2014, 29, 256), 
           ('fake_book', 'Freida', 'Harris', 2001, 287, 428),
           ('Lincoln In The Bardo', 'George', 'Saunders', 2017, 1000, 367);
```

### DISTINCT

```SQL
SELECT author_lname from books;
+----------------+
| author_lname   |
+----------------+
| Lahiri         |
| Gaiman         |
| Gaiman         |
| Lahiri         |
| Eggers         |
| Eggers         |
| Chabon         |
| Smith          |
| Eggers         |
| Gaiman         |
| Carver         |
| Carver         |
| DeLillo        |
| Steinbeck      |
| Foster Wallace |
| Foster Wallace |
| Harris         |
| Harris         |
| Saunders       |
+----------------+

SELECT DISTINCT author_lname FROM books;
+----------------+
| author_lname   |
+----------------+
| Lahiri         |
| Gaiman         |
| Eggers         |
| Chabon         |
| Smith          |
| Carver         |
| DeLillo        |
| Steinbeck      |
| Foster Wallace |
| Harris         |
| Saunders       |
+----------------+
```



```SQL
SELECT author_lname, author_fname  FROM books;
+----------------+--------------+
| author_lname   | author_fname |
+----------------+--------------+
| Lahiri         | Jhumpa       |
| Gaiman         | Neil         |
| Gaiman         | Neil         |
| Lahiri         | Jhumpa       |
| Eggers         | Dave         |
| Eggers         | Dave         |
| Chabon         | Michael      |
| Smith          | Patti        |
| Eggers         | Dave         |
| Gaiman         | Neil         |
| Carver         | Raymond      |
| Carver         | Raymond      |
| DeLillo        | Don          |
| Steinbeck      | John         |
| Foster Wallace | David        |
| Foster Wallace | David        |
| Harris         | Dan          |
| Harris         | Freida       |
| Saunders       | George       |
+----------------+--------------+

SELECT DISTINCT CONCAT(author_fname,' ', author_lname) FROM books;
+----------------------------------------+
| CONCAT(author_fname,' ', author_lname) |
+----------------------------------------+
| Jhumpa Lahiri                          |
| Neil Gaiman                            |
| Dave Eggers                            |
| Michael Chabon                         |
| Patti Smith                            |
| Raymond Carver                         |
| Don DeLillo                            |
| John Steinbeck                         |
| David Foster Wallace                   |
| Dan Harris                             |
| Freida Harris                          |
| George Saunders                        |
+----------------------------------------+
SELECT DISTINCT author_fname, author_lname, release_year FROM books;
+--------------+----------------+---------------+
| author_fname | author_lname   | released_year |
+--------------+----------------+---------------+
| Jhumpa       | Lahiri         |          2003 |
| Neil         | Gaiman         |          2016 |
| Neil         | Gaiman         |          2001 |
| Jhumpa       | Lahiri         |          1996 |
| Dave         | Eggers         |          2012 |
| Dave         | Eggers         |          2013 |
| Michael      | Chabon         |          2000 |
| Patti        | Smith          |          2010 |
| Dave         | Eggers         |          2001 |
| Neil         | Gaiman         |          2003 |
| Raymond      | Carver         |          1981 |
| Raymond      | Carver         |          1989 |
| Don          | DeLillo        |          1985 |
| John         | Steinbeck      |          1945 |
| David        | Foster Wallace |          2004 |
| David        | Foster Wallace |          2005 |
| Dan          | Harris         |          2014 |
| Freida       | Harris         |          2001 |
| George       | Saunders       |          2017 |
+--------------+----------------+---------------+
```

### `ORDER BY`

https://www.udemy.com/course/the-ultimate-mysql-bootcamp-go-from-sql-beginner-to-expert/learn/lecture/34425776#overview

```SQL
SELECT book_id, title, author_lname FROM books;
+---------+-----------------------------------------------------+----------------+
| book_id | title                                               | author_lname   |
+---------+-----------------------------------------------------+----------------+
|       1 | The Namesake                                        | Lahiri         |
|       2 | Norse Mythology                                     | Gaiman         |
|       3 | American Gods                                       | Gaiman         |
|       4 | Interpreter of Maladies                             | Lahiri         |
|       5 | A Hologram for the King: A Novel                    | Eggers         |
|       6 | The Circle                                          | Eggers         |
|       7 | The Amazing Adventures of Kavalier & Clay           | Chabon         |
|       8 | Just Kids                                           | Smith          |
|       9 | A Heartbreaking Work of Staggering Genius           | Eggers         |
|      10 | Coraline                                            | Gaiman         |
|      11 | What We Talk About When We Talk About Love: Stories | Carver         |
|      12 | Where Im Calling From: Selected Stories            | Carver         |
|      13 | White Noise                                         | DeLillo        |
|      14 | Cannery Row                                         | Steinbeck      |
|      15 | Oblivion: Stories                                   | Foster Wallace |
|      16 | Consider the Lobster                                | Foster Wallace |
|      17 | 10% Happier                                         | Harris         |
|      18 | fake_book                                           | Harris         |
|      19 | Lincoln In The Bardo                                | Saunders       |
+---------+-----------------------------------------------------+----------------+
```

```SQL
SELECT book_id, author_lname FROM books ORDER BY author_lname;
+---------+----------------+
| book_id | author_lname   |
+---------+----------------+
|      11 | Carver         |
|      12 | Carver         |
|       7 | Chabon         |
|      13 | DeLillo        |
|       5 | Eggers         |
|       6 | Eggers         |
|       9 | Eggers         |
|      15 | Foster Wallace |
|      16 | Foster Wallace |
|       2 | Gaiman         |
|       3 | Gaiman         |
|      10 | Gaiman         |
|      17 | Harris         |
|      18 | Harris         |
|       1 | Lahiri         |
|       4 | Lahiri         |
|      19 | Saunders       |
|       8 | Smith          |
|      14 | Steinbeck      |
+---------+----------------+
```

- also a good way of checking on `NULL` because it shows up before the letter a
- ASCENDING By Default; the get the other way: [SELECT book_id, author_lname FROM books ORDER BY author_lname DESC;]


```SQL
SELECT released_year FROM books ORDER BY released_year;
SELECT book_id, author_lname,released_year FROM books ORDER BY released_year;
+---------+----------------+---------------+
| book_id | author_lname   | released_year |
+---------+----------------+---------------+
|      14 | Steinbeck      |          1945 |
|      11 | Carver         |          1981 |
|      13 | DeLillo        |          1985 |
|      12 | Carver         |          1989 |
|       4 | Lahiri         |          1996 |
|       7 | Chabon         |          2000 |
|       3 | Gaiman         |          2001 |
|       9 | Eggers         |          2001 |
|      18 | Harris         |          2001 |
|       1 | Lahiri         |          2003 |
|      10 | Gaiman         |          2003 |
|      15 | Foster Wallace |          2004 |
|      16 | Foster Wallace |          2005 |
|       8 | Smith          |          2010 |
|       5 | Eggers         |          2012 |
|       6 | Eggers         |          2013 |
|      17 | Harris         |          2014 |
|       2 | Gaiman         |          2016 |
|      19 | Saunders       |          2017 |
+---------+----------------+---------------+
```

```SQL
SELECT title, pages FROM books ORDER BY pages;
+-----------------------------------------------------+-------+
| title                                               | pages |
+-----------------------------------------------------+-------+
| What We Talk About When We Talk About Love: Stories |   176 |
| Cannery Row                                         |   181 |
| Interpreter of Maladies                             |   198 |
| Coraline                                            |   208 |
| 10% Happier                                         |   256 |
| The Namesake                                        |   291 |
| Norse Mythology                                     |   304 |
| Just Kids                                           |   304 |
| White Noise                                         |   320 |
| Oblivion: Stories                                   |   329 |
| Consider the Lobster                                |   343 |
| A Hologram for the King: A Novel                    |   352 |
| Lincoln In The Bardo                                |   367 |
| fake_book                                           |   428 |
| A Heartbreaking Work of Staggering Genius           |   437 |
| American Gods                                       |   465 |
| The Circle                                          |   504 |
| Where I'm Calling From: Selected Stories            |   526 |
| The Amazing Adventures of Kavalier & Clay           |   634 |
+-----------------------------------------------------+-------+
```

```SQL
SELECT title, author_fname, author_lname 
FROM books ORDER BY 2;
-- meaning the second column that we had selected
+-----------------------------------------------------+--------------+----------------+
| title                                               | author_fname | author_lname   |
+-----------------------------------------------------+--------------+----------------+
| 10% Happier                                         | Dan          | Harris         |
| A Hologram for the King: A Novel                    | Dave         | Eggers         |
| The Circle                                          | Dave         | Eggers         |
| A Heartbreaking Work of Staggering Genius           | Dave         | Eggers         |
| Oblivion: Stories                                   | David        | Foster Wallace |
| Consider the Lobster                                | David        | Foster Wallace |
| White Noise                                         | Don          | DeLillo        |
| fake_book                                           | Freida       | Harris         |
| Lincoln In The Bardo                                | George       | Saunders       |
| The Namesake                                        | Jhumpa       | Lahiri         |
| Interpreter of Maladies                             | Jhumpa       | Lahiri         |
| Cannery Row                                         | John         | Steinbeck      |
| The Amazing Adventures of Kavalier & Clay           | Michael      | Chabon         |
| Norse Mythology                                     | Neil         | Gaiman         |
| American Gods                                       | Neil         | Gaiman         |
| Coraline                                            | Neil         | Gaiman         |
| Just Kids                                           | Patti        | Smith          |
| What We Talk About When We Talk About Love: Stories | Raymond      | Carver         |
+-----------------------------------------------------+--------------+----------------+
```

```SQL
SELECT title, author_fname, author_lname 
FROM books ORDER BY author_fname, author_lname;

-- Reihenfolge die geordnet wird: zu erst author_fname, und dann author_lname.
```

```SQL
SELECT CONCAT (author_fname, ' ', author_lname) AS author, released_year 
FROM books ORDER BY released_year;
+----------------------+---------------+
| author               | released_year |
+----------------------+---------------+
| John Steinbeck       |          1945 |
| Raymond Carver       |          1981 |
| Don DeLillo          |          1985 |
| Raymond Carver       |          1989 |
| Jhumpa Lahiri        |          1996 |
| Michael Chabon       |          2000 |
| Neil Gaiman          |          2001 |
| Dave Eggers          |          2001 |
| Freida Harris        |          2001 |
| Jhumpa Lahiri        |          2003 |
| Neil Gaiman          |          2003 |
| David Foster Wallace |          2004 |
| David Foster Wallace |          2005 |
| Patti Smith          |          2010 |
| Dave Eggers          |          2012 |
| Dave Eggers          |          2013 |
| Dan Harris           |          2014 |
| Neil Gaiman          |          2016 |
| George Saunders      |          2017 |
+----------------------+---------------+
```

```SQL
SELECT CONCAT (author_fname, ' ', author_lname) AS author, released_year 
FROM books ORDER BY author, released_year;
+----------------------+---------------+
| author               | released_year |
+----------------------+---------------+
| Dan Harris           |          2014 |
| Dave Eggers          |          2001 |
| Dave Eggers          |          2012 |
| Dave Eggers          |          2013 |
| David Foster Wallace |          2004 |
| David Foster Wallace |          2005 |
| Don DeLillo          |          1985 |
| Freida Harris        |          2001 |
| George Saunders      |          2017 |
| Jhumpa Lahiri        |          1996 |
| Jhumpa Lahiri        |          2003 |
| John Steinbeck       |          1945 |
| Michael Chabon       |          2000 |
| Neil Gaiman          |          2001 |
| Neil Gaiman          |          2003 |
| Neil Gaiman          |          2016 |
| Patti Smith          |          2010 |
| Raymond Carver       |          1981 |
| Raymond Carver       |          1989 |
+----------------------+---------------+
```

### LIMIT

- number of results we get back

```SQL
SELECT title, released_year FROM books 
ORDER BY released_year DESC LIMIT 5;

+----------------------------------+---------------+
| title                            | released_year |
+----------------------------------+---------------+
| Lincoln In The Bardo             |          2017 |
| Norse Mythology                  |          2016 |
| 10% Happier                      |          2014 |
| The Circle                       |          2013 |
| A Hologram for the King: A Novel |          2012 |
+----------------------------------+---------------+

SELECT title, released_year FROM books 
ORDER BY released_year DESC LIMIT 0,5;
-- means going from zero to five which is the same
SELECT title, released_year FROM books 
ORDER BY released_year DESC LIMIT 1,5;
-- means start from one to five
```


```SQL
SELECT * FROM tbl LIMIT 95,18446744073709551615;
```

### LIKE

```SQL
SELECT title FROM books WHERE author_fname LIKE '%da%'

-- % is called wildcards

+----------------------------------+---------------+
| title                            | released_year |
+----------------------------------+---------------+
| Lincoln In The Bardo             |          2017 |
| Norse Mythology                  |          2016 |
| 10% Happier                      |          2014 |
| The Circle                       |          2013 |
| A Hologram for the King: A Novel |          2012 |
+----------------------------------+---------------+
```

```SQL
SELECT * FROM books WHERE title LIKE '%:%'
```

```SQL
SELECT author_fname, title FROM books WHERE author_fname LIKE '____';
-- Yes, that is 4 underscores => 4 characters
-- which means exactly one character
+--------------+-------------------------------------------+
| author_fname | title                                     |
+--------------+-------------------------------------------+
| Neil         | Norse Mythology                           |
| Neil         | American Gods                             |
| Dave         | A Hologram for the King: A Novel          |
| Dave         | The Circle                                |
| Dave         | A Heartbreaking Work of Staggering Genius |
| Neil         | Coraline                                  |
| John         | Cannery Row                               |
+--------------+-------------------------------------------+

SELECT author_fname, title FROM books WHERE author_fname LIKE '%n';
-- first name ends with an n
+--------------+-------------+
| author_fname | title       |
+--------------+-------------+
| Don          | White Noise |
| John         | Cannery Row |
| Dan          | 10% Happier |
+--------------+-------------+
```

### Escaping Wildcards

- I'm searching for a book with a '%' in it
```SQL
SELECT * FROM books WHERE title LIKE '%\%%'
```

```SQL
-- I'm searching for a book with an '_' in it
-- To select books with an underscore '_' in title:
SELECT * FROM books
WHERE title LIKE '%\_%';
```


```SQL
+-----------------------------------------------------+
| title                                               |
+-----------------------------------------------------+
| What We Talk About When We Talk About Love: Stories |
| Where I'm Calling From: Selected Stories            |
| Oblivion: Stories                                   |
+-----------------------------------------------------+
```

```SQL
SELECT title FROM books WHERE title LIKE '%stories%';
 
SELECT title, pages FROM books ORDER BY pages DESC LIMIT 1;
 
SELECT 
    CONCAT(title, ' - ', released_year) AS summary 
FROM books ORDER BY released_year DESC LIMIT 3;
 
SELECT title, author_lname FROM books WHERE author_lname LIKE '% %';
 
SELECT title, released_year, stock_quantity 
FROM books ORDER BY stock_quantity LIMIT 3;
 
SELECT title, author_lname 
FROM books ORDER BY author_lname, title;
 
SELECT title, author_lname 
FROM books ORDER BY 2,1;
 
SELECT
    CONCAT(
        'MY FAVORITE AUTHOR IS ',
        UPPER(author_fname),
        ' ',
        UPPER(author_lname),
        '!'
    ) AS yell
FROM books ORDER BY author_lname;

```

## Section 9 Aggregate Functions 

### COUNT 

```SQL
SELECT COUNT(*) FROM books;
SELECT COUNT(*) AS numbers FROM books;
+----------+
| COUNT(*) |
+----------+
|       19 |
+----------+
```

- How may author_fname?

```SQL
SELECT COUNT(author_fname) AS First NAME FROM books;
-- SQL syntax
SELECT COUNT(author_fname) AS First_Name FROM books;
+------------+
| First_Name |
+------------+
|         19 |
+------------+
```

- How many DISTINCT author_fnames?

```SQL
SELECT COUNT(DISTINCT author_fname) FROM books;
+------------------------------+
| COUNT(DISTINCT author_fname) |
+------------------------------+
|                           12 |
+------------------------------+
```

- How many titles contain "the"?

```SQL
SELECT COUNT(*) FROM books 
WHERE title LIKE '%the%';

+----------+
| COUNT(*) |
+----------+
|        6 |
+----------+
```



- How would we find out how many titles contain the word "the?"

```SQL
SELECT title FROM books WHERE title LIKE '%the%';

+-------------------------------------------+
| title                                     |
+-------------------------------------------+
| The Namesake                              |
| A Hologram for the King: A Novel          |
| The Circle                                |
| The Amazing Adventures of Kavalier & Clay |
| Consider the Lobster                      |
| Lincoln In The Bardo                      |
+-------------------------------------------+

SELECT COUNT(*) FROM books WHERE title LIKE '%the%';
+----------+
| COUNT(*) |
+----------+
|        6 |
+----------+
```

### 134. GROUP BY

- summarizes or aggregates identical data into single rows
SELECT author_lname, COUNT(*) 
FROM books GROUP BY author_lname;

```SQL
SELECT author_lname FROM books
GROUP BY author_lname;

+----------------+
| author_lname   |
+----------------+
| Lahiri         |
| Gaiman         |
| Eggers         |
| Chabon         |
| Smith          |
| Carver         |
| DeLillo        |
| Steinbeck      |
| Foster Wallace |
| Harris         |
| Saunders       |
+----------------+

-- it just hsows the groups but no details

-- SELECT COUNT(DISTINCT author_lname) FROM books
-- GROUP BY released_year;

SELECT author_lname, COUNT(*) FROM books
GROUP BY author_lname;
-- count the rows in each group

+----------------+----------+
| author_lname   | COUNT(*) |
+----------------+----------+
| Lahiri         |        2 |
| Gaiman         |        3 |
| Eggers         |        3 |
| Chabon         |        1 |
| Smith          |        1 |
| Carver         |        2 |
| DeLillo        |        1 |
| Steinbeck      |        1 |
| Foster Wallace |        2 |
| Harris         |        2 |
| Saunders       |        1 |
+----------------+----------+

SELECT author_lname, COUNT(*) AS books_written FROM books 
GROUP BY author_lname
ORDER BY books_written;
+----------------+---------------+
| author_lname   | books_written |
+----------------+---------------+
| Chabon         |             1 |
| Smith          |             1 |
| DeLillo        |             1 |
| Steinbeck      |             1 |
| Saunders       |             1 |
| Lahiri         |             2 |
| Carver         |             2 |
| Foster Wallace |             2 |
| Harris         |             2 |
| Gaiman         |             3 |
| Eggers         |             3 |
+----------------+---------------+
SELECT author_lname, COUNT(*) AS books_written FROM books 
GROUP BY author_lname
ORDER BY books_written DESC;
```

https://www.udemy.com/course/the-ultimate-mysql-bootcamp-go-from-sql-beginner-to-expert/learn/lecture/34435200#overview

```SQL
Select released_year FROM books GROUP BY released_year;

Select released_year FROM books 
GROUP BY released_year DESC;
--  error in your SQL syntax

Select released_year, COUNT(*) FROM books GROUP BY released_year;
+---------------+----------+
| released_year | COUNT(*) |
+---------------+----------+
|          2003 |        2 |
|          2016 |        1 |
|          2001 |        3 |
|          1996 |        1 |
|          2012 |        1 |
|          2013 |        1 |
|          2000 |        1 |
|          2010 |        1 |
|          1981 |        1 |
|          1989 |        1 |
|          1985 |        1 |
|          1945 |        1 |
|          2004 |        1 |
|          2005 |        1 |
|          2014 |        1 |
|          2017 |        1 |
+---------------+----------+

SELECT 
    author_lname, COUNT(*) AS books_written
FROM
    books
GROUP BY author_lname
ORDER BY books_written DESC;
+----------------+---------------+
| author_lname   | books_written |
+----------------+---------------+
| Gaiman         |             3 |
| Eggers         |             3 |
| Lahiri         |             2 |
| Carver         |             2 |
| Foster Wallace |             2 |
| Harris         |             2 |
| Chabon         |             1 |
| Smith          |             1 |
| DeLillo        |             1 |
| Steinbeck      |             1 |
| Saunders       |             1 |
+----------------+---------------+
```

### 136. MIN and MAX Basics


```SQL
SELECT MIN(released_year) 
FROM books;
+--------------------+
| MIN(released_year) |
+--------------------+
|               1945 |
+--------------------+

SELECT MAX(pages) 
FROM books;
-- find the longest book
+------------+
| MAX(pages) |
+------------+
|        634 |
+------------+

SELECT MIN(author_lname) 
FROM books;
+-------------------+
| MIN(author_lname) |
+-------------------+
| Carver            |
+-------------------+
-- alphabetically speaking, lowest in the alphabet

SELECT MIN(author_lname), MAX(author_lname) 
FROM books;
+-------------------+-------------------+
| MIN(author_lname) | MAX(author_lname) |
+-------------------+-------------------+
| Carver            | Steinbeck         |
+-------------------+-------------------+
```

- the title of the longest book

```SQL
SELECT MAX(pages), title
FROM books;
-- now I want to know who it belongs to
-- error =>
```

```SQL
SELECT * FROM books 
WHERE pages = (SELECT Min(pages) 
                FROM books); 

+---------+-----------------------------------------------------+--------------+--------------+---------------+----------------+-------+
| book_id | title                                               | author_fname | author_lname | released_year | stock_quantity | pages |
+---------+-----------------------------------------------------+--------------+--------------+---------------+----------------+-------+
|      11 | What We Talk About When We Talk About Love: Stories | Raymond      | Carver       |          1981 |             23 |   176 |
+---------+-----------------------------------------------------+--------------+--------------+---------------+----------------+-------+

SELECT * FROM books 
ORDER BY pages ASC LIMIT 1;
-- same result
```

### 140. Grouping By Multiple Columns


```SQL

```

### 142. MIN and MAX With GROUP BY


```SQL
- Find the year each author published their first book

```SQL
SELECT author_fname, 
       author_lname, 
       Min(released_year) 
FROM   books 
GROUP  BY author_lname, 
          author_fname; 
```

- Find the longest page count for each author

```SQL
SELECT
  author_fname,
  author_lname,
  Max(pages)
FROM books
GROUP BY author_lname,
         author_fname;


SELECT
  CONCAT(author_fname, ' ', author_lname) AS author,
  MAX(pages) AS 'longest book'
FROM books
GROUP BY author_lname,
         author_fname;
```


### 144. SUM

```SQL
SELECT SUM(pages)
FROM books;
-- Sum all pages in the entire database
```

- Sum all pages each author has written

```SQL
SELECT author_fname,
       author_lname,
       Sum(pages)
FROM books
GROUP BY
    author_lname,
    author_fname;
```

### 146. AVG

- Calculate the average released_year across all books

```SQL
SELECT AVG(released_year) 
FROM books;
```

- Calculate the average stock quantity for books released in the same year

```SQL
SELECT AVG(stock_quantity) 
FROM books 
GROUP BY released_year;
```

- Print the number of books in the database

```SQL

```

- Print out how many books were released in each year

```SQL

```

- Print out the total number of books in stock

```SQL

```

- Find the average released_year for each author

```SQL

```

- Find the full name of the author who wrote the longest book

```SQL

```


Make This Happen
```SQL
+------+---------+-----------+
| year | # books | avg pages |
+------+---------+-----------+
| 1945 |       1 |  181.0000 |
| 1981 |       1 |  176.0000 |
| 1985 |       1 |  320.0000 |
| 1989 |       1 |  526.0000 |
| 1996 |       1 |  198.0000 |
| 2000 |       1 |  634.0000 |
| 2001 |       3 |  443.3333 |
| 2003 |       2 |  249.5000 |
| 2004 |       1 |  329.0000 |
| 2005 |       1 |  343.0000 |
| 2010 |       1 |  304.0000 |
| 2012 |       1 |  352.0000 |
| 2013 |       1 |  504.0000 |
| 2014 |       1 |  256.0000 |
| 2016 |       1 |  304.0000 |
| 2017 |       1 |  367.0000 |
+------+---------+-----------+
```

154. CHAR vs. VARCHAR
```SQL

```

```SQL

```

155. INT, TINYINT, BIGINT, etc.

```SQL

```


```SQL

```

156. DECIMAL

```SQL

```


```SQL

```

157. FLOAT & DOUBLE

158. DATE and TIME

159. Working With Dates

161. CURDATE, CURTIME, & NOW

163. Date Functions

165. Time Functions

```SQL

```


```SQL

```

167. Formatting Dates

```SQL

```


```SQL

```

169. Date Math

170. TIMESTAMPS

171. DEFAULT & ON UPDATE TIMESTAMPS

173. Data Types Exercise


```SQL

```


```SQL

```

177. Not Equal

179. NOT LIKE

181. Greater Than

183. Less Than Or Equal To

185. Logical AND

187. Logical OR

189. Between

191. Comparing Dates

193. The IN Operator

```SQL

```


```SQL

```

195. CASE

197. IS NULL


https://www.udemy.com/course/the-ultimate-mysql-bootcamp-go-from-sql-beginner-to-expert/learn/lecture/34457914#overview


### 201. UNIQUE constraint

```SQL
CREATE TABLE companies (
    supplier_id INT AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    phone VARCHAR(15) NOT NULL UNIQUE,
    address VARCHAR(255) NOT NULL,
    PRIMARY KEY (supplier_id)
);
```

* CHECK constraints

```SQL
CREATE TABLE partiers (
  name VARCHAR(50),
  age INT CHECK (age > 18)
);
```

* Named Constraints

```SQL
CREATE TABLE partiers2 (
  name VARCHAR(50),
  age INT,
  CONSTRAINT age_over_18 CHECK (age > 18)
);
```

* Named Constraints

```SQL
CREATE TABLE partiers2 (
  name VARCHAR(50),
  age INT,
  CONSTRAINT age_over_18 CHECK (age > 18)
);
```

```SQL

```

* Multi-Column Checks

```SQL
CREATE TABLE companies (
    supplier_id INT AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    phone VARCHAR(15) NOT NULL UNIQUE,
    address VARCHAR(255) NOT NULL,
    PRIMARY KEY (supplier_id),
    CONSTRAINT name_address UNIQUE (name , address)
);
```

* The combination of name and address must be unique for each row

https://webdev.slides.com/coltsteele/mysql-2-0-logical-operators#/5

* ALTER TABLE

```SQL
ALTER TABLE companies 
ADD COLUMN city VARCHAR(25);
```

* Use ALTER TABLE to add a new column to an existing table

```SQL

```


```SQL

```


```SQL

```

```SQL

```


```SQL

```


```SQL

```

```SQL

```


```SQL

```


```SQL

```

```SQL

```


```SQL

```


```SQL

```

```SQL

```


```SQL

```


```SQL

```

```SQL

```


```SQL

```